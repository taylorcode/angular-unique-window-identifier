{"version":3,"sources":["node_modules/bundler-js/node_modules/browserify/node_modules/browser-pack/_prelude.js","unique-window-identifier.js","src/module.js","src/unique-window-identifier.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"_interopRequire","obj","__esModule","UniqueWindowIdentifier","angular","module","service","./unique-window-identifier",2,"_createClass","defineProperties","target","props","key","prop","configurable","value","writable","Object","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","$window","this","currentWindow","self","nameKey","_generateUniqueId","Math","random","toString","slice","_setIdentifier","nameObj","windowNameObj","name","JSON","stringify","ensure","parse","console","warn","reset","get","identifier"],"mappings":"CAAA,QAAAA,GAAAC,EAAAC,EAAAC,GAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAE,GAAA,kBAAAC,UAAAA,OAAA,KAAAF,GAAAC,EAAA,MAAAA,GAAAF,GAAA,EAAA,IAAAI,EAAA,MAAAA,GAAAJ,GAAA,EAAA,IAAAK,GAAA,GAAAC,OAAA,uBAAAN,EAAA,IAAA,MAAAK,GAAAE,KAAA,mBAAAF,EAAA,GAAAG,GAAAX,EAAAG,IAAAS,WAAAb,GAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,GAAAE,GAAAD,EAAAI,GAAA,GAAAL,EAAA,OAAAI,GAAAF,EAAAA,EAAAF,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,MAAAD,GAAAG,GAAAS,QAAA,IAAA,GAAAL,GAAA,kBAAAD,UAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,GAAA,OAAAD,KAAAa,GAAA,SAAAT,SCCA,YAEA,IAAIU,iBAAkB,SAAUC,KAAO,MAAOA,MAAOA,IAAIC,WAAaD,IAAI,WAAaA,KCHhFE,uBAAsBH,gBAAAV,QAAM,8BAEnCc,SAAQC,OAAO,uBAAuBC,QAAQ,yBAA0BH,0BDOrEI,6BAA6B,IAAIC,GAAG,SAASlB,QAAQe,QACxD,YAEA,IAAII,cAAe,WAAe,QAASC,kBAAiBC,OAAQC,OAAS,IAAK,GAAIC,OAAOD,OAAO,CAAE,GAAIE,MAAOF,MAAMC,IAAMC,MAAKC,cAAe,EAAUD,KAAKE,QAAOF,KAAKG,UAAW,GAAQC,OAAOR,iBAAiBC,OAAQC,OAAU,MAAO,UAAUO,YAAaC,WAAYC,aAAiJ,MAA9HD,aAAYV,iBAAiBS,YAAYG,UAAWF,YAAiBC,aAAaX,iBAAiBS,YAAaE,aAAqBF,gBAEvaI,gBAAkB,SAAUC,SAAUL,aAAe,KAAMK,mBAAoBL,cAAgB,KAAM,IAAIM,WAAU,sCELlGtB,uBAAsB,WAE9B,QAFQA,wBAEPuB,SFgBVH,gBAAgBI,KElBCxB,wBAGjBwB,KAAKD,QAAUA,QACfC,KAAKC,cAAgBD,KAAKD,QAAQG,KAClCF,KAAKG,QAAU,2BFkIjB,MA9GArB,cEzBmBN,wBAkBnB4B,mBFqBIf,MErBc,WAChB,MAAOgB,MAAKC,SAASC,SAAS,IAAIC,MAAM,KAa1CC,gBFwBIpB,MExBU,SAACqB,SACb,GAAIC,eAAgBD,WACpBC,eAAcX,KAAKG,SAAWH,KAAKI,oBACnCJ,KAAKC,cAAcW,KAAOC,KAAKC,UAAUH,iBAY3CI,QF2BI1B,ME3BE,WACJ,GAAIsB,cAEJ,IAAGX,KAAKC,cAAcW,KAAM,CAC1B,IACED,cAAgBE,KAAKG,MAAMhB,KAAKC,cAAcW,MAC9C,MAAOzD,GAIP,MAFA8D,SAAQC,KAAK,sGACblB,MAAKS,iBAIHE,cAAcX,KAAKG,UACrBH,KAAKS,eAAeE,mBAGtBX,MAAKS,mBAWTU,OF8BI9B,ME9BC,WACHW,KAAKS,mBAaPW,KFiCI/B,MEjCD,WAED,GAAIgC,WACJ,KACEA,WAAaR,KAAKG,MAAMhB,KAAKC,cAAcW,MAAMZ,KAAKG,SACtD,MAAOhD,GACP,OAEF,MAAOkE,gBAjGU7C,yBF0IrBE,QAAOT,QE1IcO,iCF4IV","file":"unique-window-identifier.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",null,"import UniqueWindowIdentifier from './unique-window-identifier'\n\nangular.module('angularUniqueWindow').service('uniqueWindowIdentifier', UniqueWindowIdentifier)","/**\n * @ngdoc service\n * @name UniqueWindowIdentifier\n *\n * @description\n * Creates a unique identifier on per-window basis that persists beyond a page reload.\n *\n */\n\nexport default class UniqueWindowIdentifier {\n\n  constructor($window) {\n    this.$window = $window\n    this.currentWindow = this.$window.self\n    this.nameKey = '__uniqueWindowIdentifier'\n  }\n\n  /**\n   * @ngdoc method\n   * @private\n   * @name UniqueWindowIdentifier#_generateUniqueId\n   *\n   * @description\n   * Generates a unique id.\n   *\n   * @returns {Number} An integer unique id\n   */\n  _generateUniqueId () {\n    return Math.random().toString(36).slice(2)\n  }\n\n  /**\n   * @ngdoc method\n   * @private\n   * @name UniqueWindowIdentifier#_setIdentifier\n   *\n   * @description\n   * Generates a unique id an assigns it to the windows name property\n   *\n   * @param {Object | undefined} nameObj An object that will be stringified with the unique id property\n   */\n  _setIdentifier(nameObj) {\n    let windowNameObj = nameObj || {}\n    windowNameObj[this.nameKey] = this._generateUniqueId()\n    this.currentWindow.name = JSON.stringify(windowNameObj)\n  }\n\n  /**\n   * @ngdoc method\n   * @name UniqueWindowIdentifier#ensure\n   *\n   * @description\n   * When called, ensures that the window has a unique id. If the windows name property\n   * is already set, if it's already a serialized object, it will add or update the unique\n   * property on the object. If it's not an object, it will create one with the id property.\n   */\n  ensure() {\n    var windowNameObj\n    // if windowProps.name is set and it's not a stringified object, convert it to it\n    if(this.currentWindow.name) {\n      try {\n        windowNameObj = JSON.parse(this.currentWindow.name)\n      } catch (e) {\n        // the name is not a stringified object\n        console.warn('UniqueWindowIdentifier: the windows name is already set, overriding with an stringified object')\n        this._setIdentifier()\n        return\n      }\n      // what's saved is a stringifed object already\n      if(!windowNameObj[this.nameKey]) {\n        this._setIdentifier(windowNameObj)\n      }\n    } else {\n      this._setIdentifier()\n    }\n  }\n\n  /**\n   * @ngdoc method\n   * @name UniqueWindowIdentifier#reset\n   *\n   * @description\n   * Regenerates and sets the identifier on the window.\n   */\n  reset() {\n    this._setIdentifier()\n  }\n\n  /**\n   * @ngdoc method\n   * @name UniqueWindowIdentifier#get\n   *\n   * @description\n   * Picks the identifier from the parent object on the window's name property and\n   * returns it.\n   *\n   * @returns {String|undefined} The unique identifier\n   */\n  get() {\n    // return the identifier or undefined\n    var identifier\n    try {\n      identifier = JSON.parse(this.currentWindow.name)[this.nameKey]\n    } catch (e) {\n      return\n    }\n    return identifier\n  }\n\n}"],"sourceRoot":"/source/"}