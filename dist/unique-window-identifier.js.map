{"version":3,"sources":["unique-window-identifier.js"],"names":[],"mappings":";;;;;;IAAM,sBAAsB;AAEf,WAFP,sBAAsB,CAEd,OAAO,EAAE;0BAFjB,sBAAsB;;AAGxB,QAAI,CAAC,OAAO,GAAG,OAAO,CAAA;AACtB,QAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAA;AACtC,QAAI,CAAC,OAAO,GAAG,0BAA0B,CAAA;GAC1C;;eANG,sBAAsB;AAQ1B,qBAAiB;aAAC,6BAAG;AACnB,eAAO,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;OAC3C;;AAED,kBAAc;aAAA,wBAAC,OAAO,EAAE;AACtB,YAAI,aAAa,GAAG,OAAO,IAAI,EAAE,CAAA;AACjC,qBAAa,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAA;AACtD,YAAI,CAAC,aAAa,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAA;OACxD;;AAED,UAAM;aAAA,kBAAG;AACP,YAAI,aAAa,CAAA;;AAEjB,YAAG,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE;AAC1B,cAAI;AACF,yBAAa,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAA;WACpD,CAAC,OAAO,CAAC,EAAE;;AAEV,mBAAO,CAAC,IAAI,CAAC,gGAAgG,CAAC,CAAA;AAC9G,gBAAI,CAAC,cAAc,EAAE,CAAA;AACrB,mBAAM;WACP;;AAED,cAAG,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;AAC/B,gBAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAA;WACnC;SACF,MAAM;AACL,cAAI,CAAC,cAAc,EAAE,CAAA;SACtB;OACF;;AAED,SAAK;aAAA,iBAAG;AACN,YAAI,CAAC,cAAc,EAAE,CAAA;OACtB;;AAED,OAAG;aAAA,eAAG;;AAEJ,YAAI,UAAU,CAAA;AACd,YAAI;AACF,oBAAU,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;SAC/D,CAAC,OAAO,CAAC,EAAE;AACV,iBAAM;SACP;AACD,eAAO,UAAU,CAAA;OAClB;;;;SApDG,sBAAsB;;;AAwD5B,OAAO,CAAC,MAAM,CAAC,qBAAqB,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,wBAAwB,EAAE,sBAAsB,CAAC,CAAA","file":"unique-window-identifier.js","sourcesContent":["class UniqueWindowIdentifier {\n\n  constructor($window) {\n    this.$window = $window\n    this.currentWindow = this.$window.self\n    this.nameKey = '__uniqueWindowIdentifier'\n  }\n\n  _generateUniqueId () {\n    return Math.random().toString(36).slice(2)\n  }\n\n  _setIdentifier(nameObj) {\n    let windowNameObj = nameObj || {}\n    windowNameObj[this.nameKey] = this._generateUniqueId()\n    this.currentWindow.name = JSON.stringify(windowNameObj)\n  }\n\n  ensure() {\n    var windowNameObj\n    // if windowProps.name is set and it's not a stringified object, convert it to it\n    if(this.currentWindow.name) {\n      try {\n        windowNameObj = JSON.parse(this.currentWindow.name)\n      } catch (e) {\n        // the name is not a stringified object\n        console.warn('UniqueWindowIdentifier: the windows name is already set, overriding with an stringified object')\n        this._setIdentifier()\n        return\n      }\n      // what's saved is a stringifed object already\n      if(!windowNameObj[this.nameKey]) {\n        this._setIdentifier(windowNameObj)\n      }\n    } else {\n      this._setIdentifier()\n    }\n  }\n\n  reset() {\n    this._setIdentifier()\n  }\n\n  get() {\n    // return the identifier or undefined\n    var identifier\n    try {\n      identifier = JSON.parse(this.currentWindow.name)[this.nameKey]\n    } catch (e) {\n      return\n    }\n    return identifier\n  }\n  \n}\n\nangular.module('angularUniqueWindow', []).service('uniqueWindowIdentifier', UniqueWindowIdentifier)"],"sourceRoot":"/source/"}